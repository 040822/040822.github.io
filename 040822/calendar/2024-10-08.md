
## wsl更新失败
今日折腾。
起因：终端输入wsl，显示wsl更新，然后更新失败，报错：
```
WSL 正在完成升级...
Could not write value  to key \SOFTWARE\Classes\Directory\shell\WSL.   Verify that you have sufficient access to that key, or contact your support personnel.
更新失败(退出代码: 1603)。
错误代码: Wsl/CallMsi/Install/ERROR_INSTALL_FAILURE
```
解决方案：
[Could not write value to key \SOFTWARE\Classes\Drive\shell\WSL · Issue #11697 · microsoft/WSL (github.com)](https://github.com/microsoft/WSL/issues/11697#issuecomment-2168104220)

```
我也遇到了这个问题，似乎是因为WSL在修改注册表的时候遇到了一些困难

重命名报错的注册表字段,打开wsl就正常了

old:

- 计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Drive\shell\WSL
    
- 计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Directory\background\shell\WSL
    
- 计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Directory\shell\WSL
    

new:

- 计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Drive\shell\WSL_bak
    
- 计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Directory\background\shell\WSL_bak
    
- 计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Directory\shell\WSL_bak
```

win+r，输入regedit，打开注册表编辑器，然后哪个注册表项访问不了就重命名哪个，之后当wsl更新的时候就会自动生成这些注册表项，这样就不会报错了。
