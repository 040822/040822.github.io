---
title: Linux折腾笔记
math: true
excerpt: 这是摘要
date: 2024-04-12 12:49:08
tags:
categories:
---
## 学习资源
[命令行的艺术](https://github.com/jlevy/the-art-of-command-line/blob/master/README-zh.md)
[菜鸟教程](https://www.runoob.com/linux/linux-tutorial.html)
[VMware 虚拟机中 Linux 系统磁盘空间扩容](https://www.cnblogs.com/tzhuwb/p/12904754.html)

## 命令行的艺术
### man bash
原文长达4800多行，且全部都是英文，太可怕了。找到了个[中文翻译](https://www.cnblogs.com/huiandong/articles/9340091.html))。
下边是按照命令行的艺术这个帖子的顺序让copilot生成的一份命令指南，随用随查。在实践中，通常有以下几种情况：1.学到了很多没用的知识 2.有某种需求，却不知道用什么知识去实现它 3.连需求本身都不能确定（比如刚入门linux的时候，对命令行能干什么完全没有概念，自然会出现“连问gpt什么问题都不知道”的情况）。下边的这份命令指南能很好的解决1、3问题：对于1，copilot所生成的回答通常都是一些常用的命令，很少会出现完全用不到的情况；对于3，只需快速浏览一下下边的命令指南便可建立对linux命令行最基本的概念。
### 管道
在Unix和Linux系统中，管道（pipe）是一种重要的命令行特性，它允许你将多个命令链接在一起，这样一个命令的输出就可以作为下一个命令的输入。

管道操作符是`|`。例如，你可以使用`ls`命令列出一个目录的内容，然后使用管道将这个列表传递给`grep`命令，以搜索包含特定文本的文件名。以下是一个例子：

```bash
ls | grep ".txt"

```

在这个例子中，`ls`命令的输出（即目录的内容）被传递给了`grep`命令。`grep`命令搜索包含".txt"的行，也就是以".txt"结尾的文件名。

你可以链接任意数量的命令。例如，你可以再添加一个`wc -l`命令来计算.txt文件的数量：

```bash
ls | grep ".txt" | wc -l
```

在这个例子中，`wc -l`命令接收`grep`命令的输出，并计算输入的行数，也就是.txt文件的数量。

### 通配符
在Bash中，通配符（wildcards）是一种特殊的字符或者字符序列，它可以匹配一个或者多个文件名或者目录名。以下是一些常见的Bash通配符：

1. `*`：匹配任意数量的任意字符。例如，`*.txt`会匹配所有以`.txt`结尾的文件。

2. `?`：匹配任意单个字符。例如，`?.txt`会匹配所有只有一个字符并且以`.txt`结尾的文件，如`a.txt`，`1.txt`等。

3. `[]`：匹配方括号中的任意单个字符。例如，`[abc].txt`会匹配`a.txt`，`b.txt`和`c.txt`。

4. `[!]`或`[^]`：匹配方括号中没有列出的任意单个字符。例如，`[^abc].txt`会匹配不以`a`，`b`或`c`开头的任何`.txt`文件。

5. `{}`：匹配大括号中的任意字符串。例如，`{a,b,c}.txt`会匹配`a.txt`，`b.txt`和`c.txt`。

6. `?()`，`*()`，`+()`，`@()`，`!()`：这些是扩展的通配符，用于匹配特定的模式。例如，`*(.txt)`会匹配所有以`.txt`结尾的文件。

请注意，要使用扩展的通配符，你需要先通过`shopt -s extglob`命令启用扩展的通配符功能。

PS：题外话，github copilot真的是学习cs的好助手啊。像这些知识性的笔记可以全交给copilot来生成，随用随插即可。同时copilot生成的内容可以直接转化成markdown，真的很方便记笔记。
### 引用
在Bash中，引用（quoting）是一种防止特殊字符被Shell解释的机制。Bash中有三种类型的引用：单引号（'），双引号（"）和反斜杠（\）。

1. 单引号（'）：在单引号中的任何字符都会被原样保留，没有任何特殊含义。例如：

```bash
echo '$USER'
```

这将会输出`$USER`，而不是`$USER`变量的值。

2. 双引号（"）：在双引号中，某些特殊字符（如`$`, `` ` ``, `\`）仍然保持其特殊含义。例如：

```bash
echo "$USER"
```

这将会输出`$USER`变量的值，而不是`$USER`。

3. 反斜杠（\）：反斜杠用于转义后面的特殊字符，使其失去特殊含义。例如：

```bash
echo \$USER
```

这将会输出`$USER`，而不是`$USER`变量的值。

引用在Bash脚本编写中非常重要，特别是当你需要处理包含空格或者特殊字符的字符串时。
### 任务管理工具
在Bash中，你可以使用一些内置的命令来管理你的任务。以下是一些常见的任务管理命令：

1. `&`：在命令后面添加`&`可以让命令在后台运行。例如：

```bash
command &
```

2. `jobs`：这个命令可以列出你当前的后台任务。例如：

```bash
jobs
```

3. `fg`：这个命令可以将一个后台任务带到前台来。例如：

```bash
fg %1
```

这个命令会将任务号为1的后台任务带到前台。

4. `bg`：这个命令可以将一个暂停的任务在后台继续运行。例如：

```bash
bg %1
```

这个命令会将任务号为1的暂停任务在后台继续运行。

5. `ctrl+z`：这个键盘快捷键可以暂停当前正在前台运行的任务。

6. `ctrl+c`：这个键盘快捷键可以终止当前正在前台运行的任务。

7. `kill`：这个命令可以用来终止任务。例如：

```bash
kill %1
```

这个命令会终止任务号为1的任务。

以上就是Bash中的一些常见的任务管理命令。
### 文件管理工具
在Bash中，有许多内置的命令可以用来进行文件和目录管理。以下是一些常见的文件管理命令：

1. `ls`：列出目录的内容。例如：

```bash
ls
```

2. `cd`：改变当前目录。例如：

```bash
cd /path/to/directory
```

3. `pwd`：打印当前工作目录。例如：

```bash
pwd
```

4. `cp`：复制文件或目录。例如：

```bash
cp source.txt destination.txt
```

5. `mv`：移动或重命名文件或目录。例如：

```bash
mv old.txt new.txt
```

6. `rm`：删除文件或目录。例如：

```bash
rm file.txt
```

7. `mkdir`：创建新的目录。例如：

```bash
mkdir new_directory
```

8. `rmdir`：删除空目录。例如：

```bash
rmdir directory
```

9. `touch`：创建新的空文件，或者更新现有文件的访问和修改时间。例如：

```bash
touch file.txt
```

10. `cat`：查看文件内容。例如：

```bash
cat file.txt
```

11. `less` 和 `more`：分页查看文件内容。例如：

```bash
less file.txt
more file.txt
```

12. `find`：在目录中查找文件。例如：

```bash
find . -name "*.txt"
```

以上就是Bash中的一些常见的文件管理命令。

#### `ls -l` 中每一列代表的意义

`ls -l`命令会以长格式列出目录内容，每一行的输出包含以下信息：

```bash
-rwxr-xr-x 1 root root 4096 Jan 21 07:28 example.txt
```

每一列的含义如下：

1. `-rwxr-xr-x`：这是文件的权限。第一个字符表示文件类型（`-`表示普通文件，`d`表示目录，`l`表示符号链接等）。接下来的九个字符分为三组，每组三个字符，分别表示文件所有者、文件所属组和其他用户的权限。在每组中，`r`表示读权限，`w`表示写权限，`x`表示执行权限。

2. `1`：这是文件的硬链接数量。对于目录，这个数字表示它包含的子项数量（包括`.`和`..`）。

3. `root`：这是文件的[[#文件或目录的所有者和所属组是什么]]。

4. `root`：这是文件的所属组。

5. `4096`：这是文件的大小，单位是字节。

6. `Jan 21 07:28`：这是文件的最后修改时间。

7. `example.txt`：这是文件名。

以上就是`ls -l`命令输出的每一列的含义。
#### 一个长问题
`less`，`head`，`tail` 和 `tail -f` （甚至 `less +F`），`ln` 和 `ln -s` （了解硬链接与软链接的区别），`chown`，`chmod`，`du` （硬盘使用情况概述：`du -hs *`）。 关于文件系统的管理，学习 `df`，`mount`，`fdisk`，`mkfs`，`lsblk`。知道 inode 是什么（与 `ls -i` 和 `df -i` 等命令相关）。
这些都是Linux命令行中常用的命令，下面是它们的简单解释：

1. `less`：用于分页查看文件内容，可以向前和向后浏览。

2. `head`：显示文件的前N行。

3. `tail`：显示文件的最后N行。

4. `tail -f`：实时查看文件的末尾，常用于查看日志文件。

5. `less +F`：这与`tail -f`类似，也是实时查看文件的末尾。

6. `ln`：创建硬链接。

7. `ln -s`：创建软链接（也称为符号链接）。

硬链接和软链接的区别：硬链接是一个指向文件数据的指针，而软链接（符号链接）是一个指向另一个文件路径的指针。

8. `chown`：改变文件的所有者和所属组。

9. `chmod`：改变文件的权限。

10. `du`：显示目录或文件的磁盘使用情况。

11. `du -hs *`：显示当前目录下每个文件和目录的大小。

12. `df`：显示文件系统的磁盘使用情况。

13. `mount`：挂载文件系统。

14. `fdisk`：磁盘分区工具。

15. `mkfs`：创建文件系统。

16. `lsblk`：列出所有可用的块设备。

17. `inode`：在Unix和类Unix系统中，inode是文件系统的一种数据结构，用于存储文件或目录的元数据（不包括名称和文件数据）。每个文件或目录都有一个与之关联的inode，包含了文件的大小、权限、所有者、创建时间、访问时间等信息。
### 网络管理工具
在Bash中，有许多命令可以用来进行网络管理和诊断。以下是一些常见的网络管理命令：

1. `ping`：用于检查网络连接的可用性。例如：

```bash
ping www.google.com
```

2. `netstat`：显示网络连接，路由表，接口统计等。例如：

```bash
netstat -a
```

3. `ifconfig`：用于显示或配置网络接口。例如：

```bash
ifconfig
```

4. `ssh`：用于远程登录到其他计算机。例如：

```bash
ssh username@hostname
```

5. `scp`：用于在本地和远程计算机之间复制文件。例如：

```bash
scp source.txt username@hostname:/path/to/destination
```

6. `wget`：用于从网络下载文件。例如：

```bash
wget http://example.com/file.txt
```

7. `curl`：用于发送或接收数据。例如：

```bash
curl http://example.com
```

8. `nslookup`：查询DNS查找主机名或IP地址。例如：

```bash
nslookup www.google.com
```

9. `traceroute`：显示数据包到达目标主机所经过的路径。例如：

```bash
traceroute www.google.com
```

10. `nmap`：网络探测和安全审核。例如：

```bash
nmap -v -A target_host
```

以上就是Bash中的一些常见的网络管理命令。


## 从零学习linux！
做一个小实验，看看如何从零使用github copilot学习linux。
本章格式为：小标题表示输入copilot的问题，内容为它的回答
### 如何学习linux
学习 Linux 的一些步骤可能包括：

1. 了解 Linux：首先，了解 Linux 的基本概念，例如它是什么，它的历史，以及它与其他操作系统的区别。

2. 安装 Linux：选择一个 Linux 发行版（例如 Ubuntu，Fedora 或 Debian），并在你的计算机上安装它。你可以选择在虚拟机中安装，或者作为主操作系统安装。【ps：推荐使用wsl】

3. 学习基本命令：学习如何在终端中使用基本的 Linux 命令，例如 `ls`（列出目录内容），`cd`（更改目录），`mv`（移动或重命名文件），`cp`（复制文件），等等。【ps：命令见上】

4. 学习文件系统：理解 Linux 文件系统的结构，包括 `/`（根目录），`/home`（用户目录），`/etc`（系统配置文件），等等。

5. 学习权限和所有权：理解 Linux 的权限系统，包括用户，组，和其他的权限，以及如何使用 `chmod` 和 `chown` 命令。

6. 学习使用文本编辑器：学习如何使用 Linux 中的文本编辑器，例如 vim 或 nano。

7. 学习 shell 脚本：学习如何编写和运行 shell 脚本，以自动化常见任务。

8. 学习系统管理：学习如何安装和卸载软件，管理服务，查看系统日志，等等。

9. 实践：最好的学习方式就是实践。尝试使用 Linux 完成你的日常任务，例如浏览网页，编辑文档，甚至编程。

10. 参考资源：有许多在线资源可以帮助你学习 Linux，例如教程，文档，论坛，甚至是 YouTube 视频。

记住，学习 Linux（或任何新技能）需要时间和耐心。不要急于求成，而是慢慢来，一步一步地学习。
### linux的文件系统的结构是什么样的
Linux 文件系统的结构是一个层次化的目录结构。以下是一些主要的目录及其用途：

- `/`：这是文件系统的根目录。所有其他文件和目录都从这里开始。

- `/bin`：这个目录包含了许多用户和系统管理员在命令行模式下会使用到的命令。

- `/boot`：这个目录包含启动 Linux 操作系统所需要的文件，如内核文件和引导加载器。

- `/dev`：这个目录包含设备文件，Linux 将所有设备视为文件，这些设备文件就存放在这个目录下。

- `/etc`：这个目录包含所有的系统级配置文件和子目录，你可以在这里找到所有服务的配置文件。

- `/home`：用户的主目录，每个用户都有一个自己的目录，通常该目录名就是用户的账号名称。

- `/lib`：这个目录包含系统最基本的动态链接共享库，其作用类似于 Windows 里的 DLL 文件。

- `/proc`：这是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息。

- `/sbin`：这个目录包含一些需要系统管理员权限才能运行的命令。

- `/tmp`：这个目录用来存放临时文件。

- `/usr`：这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于 windows 下的 program files 目录。

- `/var`：这个目录包含动态数据，如缓存和日志文件。

这些只是 Linux 文件系统中的一部分目录，每个 Linux 发行版可能会有一些差异，但是大部分都遵循这个基本结构。
### Linux 文件系统的权限系统是如何工作的？
Linux 文件系统的权限系统基于三种类型的用户：文件的所有者（Owner），文件的所属组（Group）和其他用户（Others）。每种用户类型都有三种权限：读（Read），写（Write）和执行（Execute）。

每个文件或目录的权限可以用一个三位的数字来表示，每位数字代表一种用户类型的权限。数字是由对应权限的值相加得到的，其中读权限的值为4，写权限的值为2，执行权限的值为1。例如，如果一个文件的权限为755，那么文件所有者有读、写、执行权限（7=4+2+1），所属组和其他用户只有读和执行权限（5=4+1）。

你可以使用 `ls -l` 命令查看文件或目录的权限。例如，一个文件的权限可能会显示为 `-rwxr-xr-x`，这表示文件所有者有读、写、执行权限，所属组和其他用户只有读和执行权限。

你可以使用 `chmod` 命令修改文件或目录的权限。例如，`chmod 755 filename` 会将文件 `filename` 的权限设置为755。

你还可以使用 `chown` 和 `chgrp` 命令修改文件或目录的所有者和所属组。例如，`chown username filename` 会将文件 `filename` 的所有者更改为 `username`，`chgrp groupname filename` 会将文件 `filename` 的所属组更改为 `groupname`。

这就是 Linux 文件系统权限的基本工作原理。

### 文件或目录的所有者和所属组是什么
在 Linux 系统中，每个文件或目录都有一个所有者和一个所属组。

所有者（Owner）是创建文件或目录的用户。默认情况下，创建文件或目录的用户就是该文件或目录的所有者。所有者对文件或目录有最高的权限，包括读取、写入和执行文件，以及更改文件的权限和所有权。

所属组（Group）是包含一组用户的用户组，这个组有特定的访问权限。当一个文件被创建时，创建者所在的组自动成为文件的所属组。所属组中的所有用户都可以根据文件的组权限来访问该文件。

你可以使用 `ls -l` 命令查看文件或目录的所有者和所属组。例如，输出可能会是这样：
友情链接[[#`ls -l` 中每一列代表的意义]]

```
-rw-r--r-- 1 owner group 123 Jan 1 00:00 filename
```

这表示 `filename` 的所有者是 `owner`，所属组是 `group`。

你可以使用 `chown` 命令更改文件或目录的所有者，例如 `chown newowner filename`。你也可以使用 `chgrp` 命令更改文件或目录的所属组，例如 `chgrp newgroup filename`。注意，这些操作通常需要管理员权限。
### 如何入门vim
《vim：从入门到秃顶》
Vim 是一个强大的文本编辑器，但是它的学习曲线比较陡峭。以下是一些入门 Vim 的步骤：

1. 安装 Vim：在大多数 Linux 发行版中，Vim 都是预装的。你可以通过在终端输入 `vim` 来启动它。如果你的系统中没有预装 Vim，你可以通过包管理器（如 `apt` 或 `yum`）来安装它。

2. 学习 Vim 的模式：Vim 有两个主要的模式：普通模式和插入模式。在普通模式下，你可以使用键盘命令来移动光标，复制和粘贴文本，等等。在插入模式下，你可以插入文本。你可以按 `i` 键进入插入模式，按 `Esc` 键返回普通模式。

3. 学习基本的 Vim 命令：在普通模式下，你可以使用各种命令来编辑文本。例如，`h`、`j`、`k` 和 `l` 键可以用来移动光标，`dd` 命令可以删除一行，`yy` 命令可以复制一行，`p` 命令可以粘贴文本。

4. 学习如何保存和退出：在普通模式下，你可以输入 `:w` 命令来保存文件，输入 `:q` 命令来退出 Vim。如果你想保存文件并退出 Vim，你可以输入 `:wq` 命令。

5. 使用 Vim 教程：Vim 自带一个教程，你可以通过在终端输入 `vimtutor` 来访问它。这个教程包含了许多实用的练习，可以帮助你熟悉 Vim 的基本操作。

6. 实践：最好的学习方式就是实践。尝试使用 Vim 编辑一些实际的文件，这样你可以更好地理解 Vim 的工作方式。

7. 学习高级功能：当你熟悉了 Vim 的基本操作后，你可以开始学习 Vim 的高级功能，如宏，视觉模式，分屏，等等。

记住，学习 Vim 需要时间和耐心。不要急于求成，而是慢慢来，一步一步地学习。